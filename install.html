---
layout: default
---

<h2>Installation</h2>

<p>B-Translator is made of two parts, a client application and a
server application, which communicate with each-other through an HTTP
API. They can be installed together on the same server, or they can be
installed on different servers. Both of these applications are built
with Drupal7. For more flexibility, there is also a drupal module for
the client, that can be installed independently on any Drupal
application or distribution.</p>

<a id="client"><h3>Installing B-Translator Client</h3></a>

<p>The recommended way of installation for a production server is to
install it inside a chroot, in <em>trusty</em> (ubuntu
14.04). Assuming that we have already installed a minimal ubuntu
server 14.04 (trusty), B-Translator Client can be installed in it like
this:
<pre class="example">mkdir /var/chroot
cd /var/chroot/
git clone https://github.com/B-Translator/btr_client.git
cp btr_client/install/settings.sh btr_client/bcl.sh
vim btr_client/bcl.sh
nohup time nice btr_client/install/chroot.sh btr_client/bcl.sh &
tail -f nohup.out
less -r nohup.out</pre>
</p>

<p>This will install in <code>/var/chroot/</code> a minimal ubuntu
system, B-Translator Client, and everything that is needed for the
normal work of the system. It will also make the neccessary common
configurations of the system.</p>

<p>The installation script will also create the init script
<code>/etc/init.d/chroot-bcl</code>, which can be used to start and
stop the services inside the chroot:
<pre class="example">/etc/init.d/chroot-bcl start
/etc/init.d/chroot-bcl stop</pre>
</p>

<a id="client"><h3>Installing B-Translator Client in a Docker Container</h3></a>

<p>This is almost the same as the installation above, except that
instead of <code>install/chroot.sh</code> we
call <code>install/docker.sh</code>:
<pre class="example">nohup time nice btr_client/install/docker.sh btr_client/bcl.sh &</pre>
</p>

<p>Then to start and stop B-Translator Client we do:
<pre class="example">docker.io start bcl
docker.io stop bcl</pre>
</p>

<p>Compared to the installation with chroot, docker has the advantage
that it is platform independent (the host system does not have to be
Ubuntu or Debian).</p>

<a id="server"><h3>Installing B-Translator Server</h3></a>

<p>The recommended way of installation for a production server is to
install it inside a chroot, in <em>trusty</em> (ubuntu
14.04). Assuming that we have already installed a minimal ubuntu
server 14.04 (trusty), B-Translator Server can be installed in it like
this:
<pre class="example">mkdir /var/chroot
cd /var/chroot/
git clone https://github.com/B-Translator/btr_client.git
git clone https://github.com/B-Translator/btr_server.git
cp btr_server/install/settings.sh btr_server/config.sh
vim btr_server/config.sh
nohup time nice btr_server/{install/chroot.sh,config.sh} &
tail -f nohup.out
less -r nohup.out</pre>
</p>

<p>This will install in <code>/var/chroot/</code> a minimal ubuntu
system, B-Translator Server, B-Translator Client, and everything that
is needed for the normal work of the system. It will also make the
neccessary common configurations of the system.</p>

<p>The installation script will also create the init script
<code>/etc/init.d/chroot-btr</code>, which can be used to start and
stop the services inside the chroot:
<pre class="example">/etc/init.d/chroot-btr start
/etc/init.d/chroot-btr stop</pre>
</p>

<a id="server"><h3>Installing B-Translator Server in a Docker Container</h3></a>

<p>This is almost the same as the installation above, except that
instead of <code>install/chroot.sh</code> we
call <code>install/docker.sh</code>:
<pre class="example">nohup time nice btr_server/{install/chroot.sh,config.sh} &</pre>
</p>

<p>Then to start and stop B-Translator Server we do:
<pre class="example">docker.io start btr
docker.io stop btr</pre>
</p>

<a id="module"><h3>Installing btrClient Module</h3></a>

<p>The module btrClient is intended for Drupal developers who want to
integrate it into their Drupal application. For instructions about it
see <a href="https://github.com/B-Translator/btrClient"
target="_blank">https://github.com/B-Translator/btrClient</a>
or <a href="https://drupal.org/project/btrclient"
target="_blank">https://drupal.org/project/btrclient</a>.</p>

<a id="iframe"><h3>Vocabulary iFrame</h3></a>

<p>Embed something like this in your web page or application:</p>

<pre class="example"><xmp><div style="width:300px; display:inline-block;
           float:right; border:1px solid #aaa; padding:5px;">
  <h3 style="margin-top:0px; color:#2a2;">Vocabulary: ICT_sq</h3>

  <iframe src="https://l10n.org.al/vocabulary/ICT_sq?display=iframe"
          width="100%" height="350px"
          seamless="seamless" frameborder="0">
  </iframe>
</div></xmp></pre>

<div style="width:300px; display:inline-block; float:right; border:1px solid #aaa; padding:5px;">
  <h3 style="margin-top:0px; color:#2a2;">Vocabulary: ICT_sq</h3>
  <iframe src="https://l10n.org.al/vocabulary/ICT_sq?display=iframe"
          width="100%" height="350px"
          seamless="seamless" frameborder="0">
  </iframe>
</div>

<p>It will display a vocabulary inside a frame, like the example shown here:</p>

<p style="clear:both">For Drupal developers there is also a module
that defines a block that embeds this iFrame:
<br/> <a href="https://www.drupal.org/project/btrblocks"
target="_blank">https://www.drupal.org/project/btrblocks</a>.
</p>

<a id="quick"><h3>Quick Installation</h3></a>

<p>Creating a chroot installation with installation scripts takes some
time (1-2 hours) and sometimes it can fail if there are temporary
network connection problems or other problems. A quicker way of
installation is to download a pre-installed chroot filesystem and then
change only the configuration.</p>

<ol>
  <li>Download one of these archives:
    <ul>
      <li><a href="https://googledrive.com/host/0B7H_DCc2DjNGamstaDd5VjBydUk/bcl-20140917.tgz">B-Translator Client TGZ</a> (~500MB)</li>
      <li><a href="https://googledrive.com/host/0B7H_DCc2DjNGamstaDd5VjBydUk/bcl-oa-20140917.tgz">B-Translator Client TGZ (openatrium)</a> (~600MB)</li>
      <li><a href="https://googledrive.com/host/0B7H_DCc2DjNGamstaDd5VjBydUk/btr-20140917.tgz">B-Translator Server TGZ</a> (~650MB)</li>
    </ul>
  </li>
  <li>Extract the archive on the root (it will create the
    directory <code>/var/chroot/bcl/</code> containing the chroot
    system, and the init script
    <code>/etc/init.d/chroot-bcl</code>):
    <pre class="example">sudo tar --extract --absolute-names --gunzip --file=bcl.tgz</pre>
  </li>
  <li>Customize the configuration of the chroot system:
    <pre class="example">sudo su
/etc/init.d/chroot-bcl start
chroot /var/chroot/bcl/
cd /var/www/bcl/profiles/btr_client/
install/config.sh
</pre>
  </li>
  <li>Fix also the network connection from inside chroot:
    <pre class="example">chroot /var/chroot/bcl/
vim /etc/resolv.conf
ping www.google.com
</pre>
  </li>
</ol>

<p><strong>Note:</strong>The <strong>openatrium</strong> variant of
the client is not finished and needs heavy custom configurations. For
the case of the server, replace <strong>bcl</strong>
with <strong>btr</strong> in the instructions above.</p>

<a id="quick"><h3>Quick Installation with Docker</h3></a>
